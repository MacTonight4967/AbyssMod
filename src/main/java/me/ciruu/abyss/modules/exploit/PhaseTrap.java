package me.ciruu.abyss.modules.exploit;

import com.mojang.realmsclient.gui.ChatFormatting;
import java.util.function.Predicate;
import me.ciruu.abyss.Class26;
import me.ciruu.abyss.Class30;
import me.ciruu.abyss.Globals;
import me.ciruu.abyss.Manager;
import me.ciruu.abyss.enums.Class11;
import me.ciruu.abyss.enums.Class230;
import me.ciruu.abyss.modules.Module;
import me.ciruu.abyss.settings.Setting;
import me.zero.alpine.listener.EventHandler;
import me.zero.alpine.listener.Listener;
import net.minecraft.block.Block;
import net.minecraft.block.BlockAir;
import net.minecraft.block.BlockDeadBush;
import net.minecraft.block.BlockFire;
import net.minecraft.block.BlockLiquid;
import net.minecraft.block.BlockSnow;
import net.minecraft.block.BlockTallGrass;
import net.minecraft.entity.Entity;
import net.minecraft.entity.player.EntityPlayer;
import net.minecraft.util.math.BlockPos;

public class PhaseTrap
extends Module {
    private final Setting mode = new Setting("Mode", "", this, (Object)Class230.Smart);
    private final Setting teleport = new Setting("Teleport", "", this, true);
    private final Setting packet = new Setting("Packet", "", this, true);
    private final Setting setPos = new Setting("SetPos", "", this, true);
    private final Setting sneak = new Setting("Sneak", "", this, true);
    private final Setting disable = new Setting("Disable", "", this, true);
    private int Field557 = 0;
    @EventHandler
    private Listener Field558 = new Listener<Class26>(this::Method705, new Predicate[0]);

    public PhaseTrap() {
        super("PhaseTrap", "Phase through trapped players", Class11.EXPLOIT);
        this.Method706(this.mode);
        this.Method706(this.setPos);
        this.Method706(this.disable);
    }

    public String Method707() {
        return ChatFormatting.WHITE + ((Class230)((Object)this.mode.getValue())).name();
    }

    public void Method708() {
        super.Method13();
        this.Field557 = 0;
    }

    public void Method709() {
        if (this.mode.getValue() == Class230.Always) {
            this.Method710();
        } else if (this.mode.getValue() == Class230.Smart) {
            for (EntityPlayer entityPlayer : Globals.mc.world.playerEntities) {
                if (entityPlayer == Globals.mc.player || Manager.Field223.Method711((Entity)entityPlayer) || Class30.Method209(entityPlayer).getX() != Class30.Method209((EntityPlayer)Globals.mc.player).getX() || Class30.Method209(entityPlayer).getZ() != Class30.Method209((EntityPlayer)Globals.mc.player).getZ() || !(Globals.mc.player.posY - entityPlayer.posY >= 3.0) || !(Globals.mc.player.posY - entityPlayer.posY < 4.0) || !this.Method712(Globals.mc.world.getBlockState(new BlockPos(entityPlayer.getPositionVector())).getBlock()) || !this.Method712(Globals.mc.world.getBlockState(new BlockPos(entityPlayer.getPositionVector().add(0.0, 1.0, 0.0))).getBlock()) || this.Method712(Globals.mc.world.getBlockState(new BlockPos(entityPlayer.getPositionVector().add(0.0, 2.0, 0.0))).getBlock())) continue;
                this.Method710();
            }
        }
    }

    private void Method710() {
        if (((Boolean)this.setPos.getValue()).booleanValue()) {
            Globals.mc.player.setPosition(Globals.mc.player.posX, Globals.mc.player.posY - 3.0, Globals.mc.player.posZ);
        }
        if (((Boolean)this.disable.getValue()).booleanValue()) {
            this.Method713();
        }
    }

    private boolean Method712(Block block) {
        return block instanceof BlockAir || block instanceof BlockLiquid || block instanceof BlockTallGrass || block instanceof BlockFire || block instanceof BlockDeadBush || block instanceof BlockSnow;
    }

    private void Method705(Class26 class26) {
        this.Method709();
    }
}
