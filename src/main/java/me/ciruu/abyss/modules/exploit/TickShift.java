package me.ciruu.abyss.modules.exploit;

import com.mojang.realmsclient.gui.ChatFormatting;
import java.util.function.Predicate;
import me.ciruu.abyss.Globals;
import me.ciruu.abyss.enums.Class11;
import me.ciruu.abyss.events.player.EventPlayerUpdate;
import me.ciruu.abyss.modules.Module;
import me.ciruu.abyss.settings.Setting;
import me.zero.alpine.listener.EventHandler;
import me.zero.alpine.listener.Listener;
import net.minecraft.entity.EntityLivingBase;

public class TickShift
extends Module {
    private final Setting disable = new Setting("Disable", "", this, true);
    private final Setting disableTicks = new Setting("DisableTicks", "", (Module)this, (Object)26, 1, 100);
    private final Setting movementEnable = new Setting("MovementEnable", "", this, true);
    private final Setting enableTicks = new Setting("EnableTicks", "", (Module)this, (Object)30, 1, 100);
    private final Setting multiplier = new Setting("Multiplier", "", (Module)this, (Object)Float.valueOf(3.0f), Float.valueOf(1.0f), Float.valueOf(10.0f));
    private int Field632 = 0;
    private int Field633 = 0;
    private boolean Field634;
    private boolean Field635 = false;
    @EventHandler
    private final Listener Field636 = new Listener<EventPlayerUpdate>(this::Method754, -4000, new Predicate[0]);

    public TickShift() {
        super("TickShift", "", Class11.EXPLOIT);
        this.Method755(this.disable);
        this.Method755(this.disableTicks);
        this.Method755(this.movementEnable);
        this.Method755(this.enableTicks);
        this.Method755(this.multiplier);
    }

    public static boolean Method756(EntityLivingBase entityLivingBase) {
        return entityLivingBase.moveForward != 0.0f || entityLivingBase.moveStrafing != 0.0f;
    }

    public void Method757() {
        super.Method15();
        this.Field635 = false;
        this.Field633 = 0;
        Globals.mc.timer.tickLength = 50.0f;
    }

    public void Method758() {
        this.Field635 = false;
        this.Field633 = 0;
        Globals.mc.timer.tickLength = 50.0f;
    }

    public String Method759() {
        return ChatFormatting.WHITE + String.valueOf(this.Field633);
    }

    public void Method760(boolean bl) {
        if (this.Method761()) {
            this.Method762(false);
            this.Method757();
        }
    }

    private void Method754(EventPlayerUpdate eventPlayerUpdate) {
        if (!this.Field635) {
            if (TickShift.Method756((EntityLivingBase)Globals.mc.player)) {
                if (this.Field633 >= 1) {
                    --this.Field633;
                }
            } else if (!TickShift.Method756((EntityLivingBase)Globals.mc.player)) {
                ++this.Field633;
            }
        }
        if (this.Field633 >= (Integer)this.enableTicks.getValue()) {
            this.Field635 = true;
            if (((Boolean)this.movementEnable.getValue()).booleanValue()) {
                if (Globals.mc.gameSettings.keyBindJump.isKeyDown() || Globals.mc.gameSettings.keyBindSneak.isKeyDown() || Globals.mc.gameSettings.keyBindRight.isKeyDown() || Globals.mc.gameSettings.keyBindLeft.isKeyDown() || Globals.mc.gameSettings.keyBindForward.isKeyDown() || Globals.mc.gameSettings.keyBindBack.isKeyDown()) {
                    Globals.mc.timer.tickLength = (float)(50.0 / (double)((Float)this.multiplier.getValue()).floatValue());
                    ++this.Field632;
                }
            } else {
                Globals.mc.timer.tickLength = (float)(50.0 / (double)((Float)this.multiplier.getValue()).floatValue());
                ++this.Field632;
            }
        }
        if (this.Field632 >= (Integer)this.disableTicks.getValue()) {
            this.Field632 = 0;
            if (((Boolean)this.disable.getValue()).booleanValue()) {
                this.Method763();
            } else {
                this.Method758();
            }
        }
    }
}
