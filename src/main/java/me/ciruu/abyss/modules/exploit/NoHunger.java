package me.ciruu.abyss.modules.exploit;

import java.util.function.Predicate;
import me.ciruu.abyss.Globals;
import me.ciruu.abyss.enums.Class11;
import me.ciruu.abyss.events.network.EventNetworkPostPacketEvent;
import me.ciruu.abyss.modules.Module;
import me.zero.alpine.listener.EventHandler;
import me.zero.alpine.listener.Listener;
import net.minecraft.network.play.client.CPacketEntityAction;
import net.minecraft.network.play.client.CPacketPlayer;

public class NoHunger
extends Module {
    @EventHandler
    private Listener Field2172 = new Listener<EventNetworkPostPacketEvent>(NoHunger::Method2648, new Predicate[0]);

    public NoHunger() {
        super("NoHunger", "", Class11.EXPLOIT);
    }

    private static void Method2648(EventNetworkPostPacketEvent eventNetworkPostPacketEvent) {
        CPacketPlayer cPacketPlayer;
        if (eventNetworkPostPacketEvent.Method16() instanceof CPacketPlayer) {
            cPacketPlayer = (CPacketPlayer)eventNetworkPostPacketEvent.Method16();
            boolean bl = cPacketPlayer.onGround = (Globals.mc.player.fallDistance <= 0.0f || Globals.mc.playerController.isHittingBlock) && Globals.mc.player.isElytraFlying();
        }
        if (eventNetworkPostPacketEvent.Method16() instanceof CPacketEntityAction && ((cPacketPlayer = (CPacketEntityAction)eventNetworkPostPacketEvent.Method16()).getAction() == CPacketEntityAction.Action.START_SPRINTING || cPacketPlayer.getAction() == CPacketEntityAction.Action.STOP_SPRINTING)) {
            eventNetworkPostPacketEvent.cancel();
        }
    }
}
