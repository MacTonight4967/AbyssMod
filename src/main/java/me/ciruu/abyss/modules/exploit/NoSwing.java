package me.ciruu.abyss.modules.exploit;

import com.mojang.realmsclient.gui.ChatFormatting;
import java.util.function.Predicate;
import me.ciruu.abyss.enums.Class11;
import me.ciruu.abyss.enums.Class562;
import me.ciruu.abyss.events.network.EventNetworkPostPacketEvent;
import me.ciruu.abyss.events.player.EventPlayerSwingArm;
import me.ciruu.abyss.modules.Module;
import me.ciruu.abyss.settings.Setting;
import me.zero.alpine.listener.EventHandler;
import me.zero.alpine.listener.Listener;
import net.minecraft.network.play.client.CPacketAnimation;
import net.minecraft.util.EnumHand;

public class NoSwing
extends Module {
    private final Setting mode = new Setting("Mode", "Mode", this, (Object)Class562.Full);
    @EventHandler
    private Listener Field2185 = new Listener<EventNetworkPostPacketEvent>(this::Method2669, new Predicate[0]);
    @EventHandler
    private Listener Field2186 = new Listener<EventPlayerSwingArm>(this::Method2670, new Predicate[0]);

    public NoSwing() {
        super("NoSwing", "Cancel swing packet/animation.", Class11.EXPLOIT);
        this.Method2671(this.mode);
    }

    public String Method2672() {
        return ChatFormatting.WHITE + ((Class562)((Object)this.mode.getValue())).name();
    }

    private void Method2670(EventPlayerSwingArm eventPlayerSwingArm) {
        if (this.mode.getValue() == Class562.Full) {
            eventPlayerSwingArm.cancel();
        } else if (this.mode.getValue() == Class562.Offhand) {
            eventPlayerSwingArm.Field2189 = EnumHand.OFF_HAND;
        }
    }

    private void Method2669(EventNetworkPostPacketEvent eventNetworkPostPacketEvent) {
        if (eventNetworkPostPacketEvent.Method16() instanceof CPacketAnimation && this.mode.getValue() == Class562.Packet) {
            eventNetworkPostPacketEvent.cancel();
        }
    }
}
